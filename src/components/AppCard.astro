---
interface Props {
  title: string;
  tagline: string;
  description: string;
  icon?: string;
  platforms: string[];
  appStoreUrl?: string;
  status?: 'available' | 'coming-soon' | 'beta';
  color?: string;
  href: string;
  category?: string;
}

const { 
  title, 
  tagline, 
  description, 
  icon, 
  platforms, 
  appStoreUrl, 
  status = 'available',
  color = '#34d399',
  href,
  category = 'App'
} = Astro.props;

const platformLabels: Record<string, string> = {
  iOS: 'iPhone',
  iPadOS: 'iPad',
  macOS: 'Mac',
  watchOS: 'Watch',
  visionOS: 'Vision',
  tvOS: 'TV',
};
---

<a href={href} class="app-card group block">
  <div class="flex items-start gap-4 mb-4">
    <!-- App Icon -->
    {icon ? (
      <img 
        src={icon} 
        alt={`${title} icon`} 
        class="w-16 h-16 rounded-2xl shadow-lg shrink-0 transition-transform duration-300 group-hover:scale-105" 
      />
    ) : (
      <div 
        class="w-16 h-16 rounded-2xl flex items-center justify-center text-3xl shadow-lg shrink-0 transition-transform duration-300 group-hover:scale-105"
        style={`background: linear-gradient(135deg, ${color}, ${color}cc);`}
      >
        <span>âœ¦</span>
      </div>
    )}
    
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-1 flex-wrap">
        <h3 class="font-serif text-xl text-white">{title}</h3>
        {status === 'coming-soon' && (
          <span class="font-sans text-xs px-2 py-0.5 bg-amber-500/20 text-amber-300 rounded-full">Coming Soon</span>
        )}
        {status === 'beta' && (
          <span class="font-sans text-xs px-2 py-0.5 bg-purple-500/20 text-purple-300 rounded-full">Beta</span>
        )}
      </div>
      <p class="font-sans text-white/60 text-sm">{tagline}</p>
    </div>
  </div>
  
  <p class="font-sans text-white/50 text-sm leading-relaxed mb-4 line-clamp-2">
    {description}
  </p>
  
  <div class="flex items-center justify-between">
    <!-- Platforms -->
    <div class="flex items-center gap-2">
      {platforms.slice(0, 3).map((platform) => (
        <span class="font-sans text-xs text-white/40 px-2 py-1 bg-white/5 rounded-md">
          {platformLabels[platform] || platform}
        </span>
      ))}
      {platforms.length > 3 && (
        <span class="font-sans text-xs text-white/40">+{platforms.length - 3}</span>
      )}
    </div>
    
    <!-- Arrow indicator -->
    <svg class="w-5 h-5 text-white/30 group-hover:text-white/60 group-hover:translate-x-1 transition-all" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M5 12h14M12 5l7 7-7 7"/>
    </svg>
  </div>
</a>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
