---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const apps = await getCollection('apps');
const featuredApps = apps
  .filter(app => app.data.featured)
  .sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Home">
  <!-- Hero Section with Animated Logo -->
  <section class="min-h-screen flex items-center justify-center relative" id="hero">
    <div class="text-center px-6">
      <!-- Main Title with integrated ‚ùç -->
      <h1 class="hero-title mb-6" id="hero-title">
        <span class="inline-block opacity-0" id="title-lum">Lum</span><span class="inline-block opacity-0 lumon-ring align-middle relative text-[0.85em] -top-[0.02em]" id="title-o">‚ùç</span><span class="inline-block opacity-0" id="title-n">n</span>
        <span class="inline-block ml-4 opacity-0" id="title-labs">Labs</span>
      </h1>

      <!-- Tagline -->
      <p class="hero-tagline max-w-2xl mx-auto mb-12 opacity-0" id="hero-tagline">
        Building apps that blow your mind
      </p>

      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 opacity-0" id="hero-cta">
        <a href="/apps" class="btn-primary">
          Explore Our Apps
        </a>
        <a href="/about" class="btn-secondary">
          Learn More
        </a>
      </div>

      <!-- Scroll indicator -->
      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 opacity-0" id="scroll-indicator">
        <div class="scroll-indicator text-white/50">
          <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5v14M5 12l7 7 7-7"/>
          </svg>
        </div>
      </div>
    </div>
  </section>

  <!-- Apps Section -->
  <section class="section" id="apps-section">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="font-serif text-4xl md:text-5xl font-light text-white mb-4">Our Creations</h2>
        <p class="font-sans text-white/70 text-lg max-w-xl mx-auto">
          Thoughtfully designed apps for the Apple ecosystem
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <!-- Motif Designer -->
        <a href="/apps/motif-designer" class="app-card group block">
          <div class="flex items-start gap-4">
            <img 
              src="/images/apps/motif-designer.png" 
              alt="Motif Designer icon" 
              class="w-16 h-16 rounded-2xl shrink-0 shadow-lg group-hover:scale-105 transition-transform"
            />
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h3 class="font-serif text-xl text-white">Motif Designer</h3>
                <span class="font-sans text-xs px-2 py-0.5 bg-white/10 rounded-full text-white/70">Graphics & Design</span>
              </div>
              <p class="font-sans text-white/60 text-sm leading-relaxed">
                Your go-to icon creation tool. Create stunning icons with customizable designs, backgrounds, and seamless export options.
              </p>
            </div>
          </div>
        </a>

        <!-- Stage Timer -->
        <a href="/apps/stage-timer" class="app-card group block">
          <div class="flex items-start gap-4">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center shrink-0 shadow-lg group-hover:scale-105 transition-transform">
              <span class="text-3xl">‚è±Ô∏è</span>
            </div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h3 class="font-serif text-xl text-white">Stage Timer</h3>
                <span class="font-sans text-xs px-2 py-0.5 bg-white/10 rounded-full text-white/70">Utilities</span>
              </div>
              <p class="font-sans text-white/60 text-sm leading-relaxed">
                Professional countdown timer for presentations, events, and performances. Never run over time again.
              </p>
            </div>
          </div>
        </a>

        <!-- RhythmKey -->
        <a href="/apps/rhythmkey" class="app-card group block">
          <div class="flex items-start gap-4">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shrink-0 shadow-lg group-hover:scale-105 transition-transform">
              <span class="text-3xl">üéπ</span>
            </div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h3 class="font-serif text-xl text-white">RhythmKey</h3>
                <span class="font-sans text-xs px-2 py-0.5 bg-white/10 rounded-full text-white/70">Utilities</span>
              </div>
              <p class="font-sans text-white/60 text-sm leading-relaxed">
                Turn your keyboard into a musical instrument. Express yourself through sound with every keystroke.
              </p>
            </div>
          </div>
        </a>

        <!-- Experiences -->
        <a href="/apps/experiences" class="app-card group block">
          <div class="flex items-start gap-4">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center shrink-0 shadow-lg group-hover:scale-105 transition-transform">
              <span class="text-3xl">üåç</span>
            </div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-1">
                <h3 class="font-serif text-xl text-white">Experiences</h3>
                <span class="font-sans text-xs px-2 py-0.5 bg-white/10 rounded-full text-white/70">Travel</span>
              </div>
              <p class="font-sans text-white/60 text-sm leading-relaxed">
                Capture and relive your travel memories. Beautiful journal for your adventures around the world.
              </p>
            </div>
          </div>
        </a>
      </div>

      <div class="text-center mt-12">
        <a href="/apps" class="btn-secondary">
          View All Apps
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Philosophy Section -->
  <section class="section">
    <div class="max-w-4xl mx-auto px-6">
      <div class="glass-card p-10 md:p-16 text-center">
        <blockquote class="font-serif text-2xl md:text-3xl font-light text-white leading-relaxed mb-8">
          "We believe software should be a joy to use. Every pixel, every interaction, every moment ‚Äî designed with intention."
        </blockquote>
        <div class="w-12 h-px bg-white/30 mx-auto mb-6"></div>
        <p class="font-sans text-white/60 text-sm uppercase tracking-widest">The Lumon Labs Philosophy</p>
      </div>
    </div>
  </section>

  <!-- Contact CTA -->
  <section class="section pb-32">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h2 class="font-serif text-3xl md:text-4xl font-light text-white mb-4">Let's Create Something Beautiful</h2>
      <p class="font-sans text-white/70 mb-8 max-w-lg mx-auto">
        Have a question, feedback, or just want to say hello? We'd love to hear from you.
      </p>
      <a href="/contact" class="btn-primary">
        Get in Touch
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
          <polyline points="22,6 12,13 2,6"/>
        </svg>
      </a>
    </div>
  </section>
</BaseLayout>

<style>
  /* Title letter animations */
  #hero-title span {
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  #hero-title span.visible {
    opacity: 1 !important;
  }

  /* Ring ‚ùç special animation - appears first and scales down into place */
  .lumon-ring.animate {
    animation: ringReveal 1s ease-out forwards;
  }

  @keyframes ringReveal {
    0% {
      opacity: 0;
      transform: scale(3);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Other letters slide in */
  #title-lum.visible {
    animation: slideFromLeft 0.5s ease-out forwards;
  }

  #title-n.visible {
    animation: slideFromRight 0.5s ease-out forwards;
  }

  #title-labs.visible {
    animation: slideFromRight 0.5s ease-out 0.1s forwards;
  }

  @keyframes slideFromLeft {
    0% {
      opacity: 0;
      transform: translateX(-20px);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideFromRight {
    0% {
      opacity: 0;
      transform: translateX(20px);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeSlideUp {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Tagline and CTA animations */
  #hero-tagline.visible {
    animation: fadeSlideUp 0.6s ease-out forwards;
  }

  #hero-cta.visible {
    animation: fadeSlideUp 0.6s ease-out 0.1s forwards;
  }

  #scroll-indicator.visible {
    animation: fadeIn 1s ease-out 0.3s forwards;
  }

  @keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }
</style>

<script>
  // Hero animation sequence
  document.addEventListener('DOMContentLoaded', () => {
    const titleO = document.getElementById('title-o');
    const titleLum = document.getElementById('title-lum');
    const titleN = document.getElementById('title-n');
    const titleLabs = document.getElementById('title-labs');
    const heroTagline = document.getElementById('hero-tagline');
    const heroCta = document.getElementById('hero-cta');
    const scrollIndicator = document.getElementById('scroll-indicator');

    // Start with the ‚ùç ring animation
    setTimeout(() => {
      titleO?.classList.add('animate', 'visible');
    }, 300);

    // Then reveal the surrounding letters
    setTimeout(() => {
      titleLum?.classList.add('visible');
      titleN?.classList.add('visible');
    }, 1000);

    // Then reveal "Labs"
    setTimeout(() => {
      titleLabs?.classList.add('visible');
    }, 1200);

    // Show tagline
    setTimeout(() => {
      heroTagline?.classList.add('visible');
    }, 1600);

    // Show CTA buttons
    setTimeout(() => {
      heroCta?.classList.add('visible');
    }, 1900);

    // Show scroll indicator
    setTimeout(() => {
      scrollIndicator?.classList.add('visible');
    }, 2400);
  });
</script>
